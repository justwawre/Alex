    but the epc is under  172.16.27.xx

    
    
    11.68.173.2/x -- | 10.68.173.155| === | x.x.x.x |
      SG 2nd subneet     SG                  eNB

/////////////////
sg 与 enb 之间能够 ping 通既可，无论直接连接或通过vlan 连接


/////////////////install

tar xvf strongswan-4.5.3.tar.gz
cd strongswan-4.x.x

./configure --prefix=/usr --sysconfdir=/etc   (may need add gmp )

make

make install



/////////////////Configuration

step 1: 

copy ca-certificate.pem to

   /etc/ipsec.d/cacerts/

step 2:
copy Cert.pem  to

   /etc/ipsec.d/certs/

  ///CRLs
      By copying a CA certificate into /etc/ipsec.d/cacerts/, automatically all user
      or host certificates issued by this CA are declared valid. Unfortunately
      private keys might get compromised inadvertently or intentionally, personal
      certificates of users leaving a company have to be blocked immediately, etc.
      To this purpose certificate revocation lists (CRLs) have been created. CRLs
      contain the serial numbers of all user or host certificates that have been
      revoked due to various reasons.

      After successful verification of the X.509 trust chain, Pluto searches its
      list of CRLs either obtained by loading them from the /etc/ipsec.d/crls/
      directory or fetching them dynamically from a HTTP or LDAP server for the
      presence of a CRL issued by the CA that has signed the certificate.
      
      
      CRLs can also be automatically fetched from an HTTP or LDAP server by using
      the CRL distribution points contained in X.509 certificates. The command

        ipsec listcrls


step 3:

 /etc/ipsec.secrets:
add

: RSA Private.pem

 copy  Private.pem to /etc/ipsec.d/private 

step 4:

   /etc/ipsec.conf:

check

# basic configuration
config setup
  plutostart=no
  charonstart=no     
  ///// 可能需要设置为 no，这样不会自动启动


"keyexchange=ike" 是 default 值，不需要设置

add: 
    
conn enb
    left=10.68.173.155
    leftsubnet=11.68.173.0/8
    leftcert=Cert.pem
    right=%any
    auto=add
    
    

           //////leftid 不指定的话，automatically assumes the subject DN of leftcert to be the host ID.
           /////conn rw
                     right=%any
                
                defines the general roadwarrior case. The line right=%any literally means that
                any IPSec peer is accepted, regardless of its current IP source address and its
                ID, as long as the peer presents a valid X.509 certificate signed by a CA the
                strongSwan security gateway puts explicit trust in.


step 5:
ipsec start


